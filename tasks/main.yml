---
### Checks
- name: Import check tasks
  ansible.builtin.import_tasks: check.yml

### Import vars
- name: Add OS specific variables
  ansible.builtin.include_vars: "{{ lookup('first_found', params) }}"
  vars:
    params:
      files:
        - "{{ ansible_distribution | lower }}-{{ ansible_distribution_version | lower }}.yml"
        - "{{ ansible_distribution | lower }}-{{ ansible_distribution_major_version | lower }}.yml"
        - "{{ ansible_os_family | lower }}-{{ ansible_distribution_major_version | lower }}.yml"
        - "{{ ansible_distribution | lower }}.yml"
        - "{{ ansible_os_family | lower }}.yml"
        - "main.yml"
      paths:
        - "vars"

### Install
- name: Import install tasks
  ansible.builtin.import_tasks: install.yml
